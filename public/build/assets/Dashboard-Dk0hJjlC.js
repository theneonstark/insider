import{j as e,L as Is,r,u as Fs}from"./app-CwIQ7xNJ.js";import{B as p,u as Ts,c as me,C,a as F,b as T,d as U,e as k}from"./index-DGuJ_oGC.js";import{E as De,B as q}from"./badge-ChaE63Ga.js";import{P as H,z as y,I as M,i as ks,j as Ms,k as Es,D as _s,m as Ds,g as Rs,l as Ls,C as Os}from"./apis-sbpHoOzt.js";import{L as g}from"./label-D2eWbqLc.js";import{H as Us,C as Vs,S as Bs,L as Gs,T as Q,B as $s,a as zs,e as Ks,b as Ys,E as Hs,c as Js,A as Ie,U as qs,d as Qs}from"./EditAdModal-BgnxBgLj.js";import{c as z}from"./createLucideIcon-C52SeaGq.js";import{C as Ws,a as Xs,b as Zs,c as ea,d as sa,e as aa,P as ta,M as Fe}from"./carousel-CeTHO9Js.js";import{S as Re}from"./star-DL1vcL2g.js";import{d as ra,D as Le,a as Oe,b as Ue,c as Ve,S as na,P as ia,X as la}from"./ProfileViewModal-CgTMgkNZ.js";import{e as Be,f as oa,u as Ge,g as V,h as $e,i as ze,j as ca,S as Te,a as ke,b as Me,c as Ee,d as _e}from"./select-C_Ls5g3Q.js";import"./react-stripe.esm-BtqtPIjG.js";import"./arrow-left-BiE6NJMg.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ua=z("message-circle",da);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ha=z("message-square",ma);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],pa=z("panels-top-left",xa);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oe=z("plus",fa);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ja=z("save",ga);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ce=z("trash-2",va);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ya=z("user",ba),Na=({activeSection:t,onSectionChange:o})=>{const i=[{id:"dashboard",label:"Dashboard",icon:Us},{id:"profile",label:"My Profile",icon:ya},{id:"membership",label:"Membership Plans",icon:Ws},{id:"editor",label:"Landing Page Editor",icon:pa},{id:"ads",label:"Ads Management",icon:Vs},{id:"chat",label:"Chat",icon:ha},{id:"featured",label:"Featured",icon:Re},{id:"settings",label:"Settings",icon:Bs}];return e.jsxs("aside",{className:"w-[260px] min-h-screen bg-[#FFF1F4] border-r border-[#F3D6E3] flex flex-col",children:[e.jsx("div",{className:"p-6",children:e.jsx("h2",{className:"text-xl font-heading text-foreground",children:"My Dashboard"})}),e.jsx("nav",{className:"flex-1 px-3 space-y-1",children:i.map(n=>{const m=n.icon,f=t===n.id;return e.jsxs("button",{onClick:()=>o(n.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${f?"bg-primary text-primary-foreground shadow-sm":"text-[#5A5A5A] hover:bg-primary/10"}`,children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:n.label})]},n.id)})}),e.jsx("div",{className:"p-4 border-t border-[#F3D6E3]",children:e.jsx(Is,{href:"/auth/logout",children:e.jsxs(p,{variant:"ghost",className:"w-full justify-start gap-3 text-[#5A5A5A] hover:bg-primary/10",children:[e.jsx(Gs,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})})})]})};var de="rovingFocusGroup.onEntryFocus",wa={bubbles:!1,cancelable:!0},Z="RovingFocusGroup",[ue,Ke,Ca]=oa(Z),[Sa,Ye]=Be(Z,[Ca]),[Aa,Pa]=Sa(Z),He=r.forwardRef((t,o)=>e.jsx(ue.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(ue.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Ia,{...t,ref:o})})}));He.displayName=Z;var Ia=r.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:i,orientation:n,loop:m=!1,dir:f,currentTabStopId:c,defaultCurrentTabStopId:N,onCurrentTabStopIdChange:P,onEntryFocus:j,preventScrollOnEntryFocus:x=!1,...v}=t,w=r.useRef(null),B=Ts(o,w),G=$e(f),[O,b]=ze({prop:c,defaultProp:N??null,onChange:P,caller:Z}),[E,_]=r.useState(!1),S=ca(j),I=Ke(i),a=r.useRef(!1),[l,D]=r.useState(0);return r.useEffect(()=>{const h=w.current;if(h)return h.addEventListener(de,S),()=>h.removeEventListener(de,S)},[S]),e.jsx(Aa,{scope:i,orientation:n,dir:G,loop:m,currentTabStopId:O,onItemFocus:r.useCallback(h=>b(h),[b]),onItemShiftTab:r.useCallback(()=>_(!0),[]),onFocusableItemAdd:r.useCallback(()=>D(h=>h+1),[]),onFocusableItemRemove:r.useCallback(()=>D(h=>h-1),[]),children:e.jsx(H.div,{tabIndex:E||l===0?-1:0,"data-orientation":n,...v,ref:B,style:{outline:"none",...t.style},onMouseDown:V(t.onMouseDown,()=>{a.current=!0}),onFocus:V(t.onFocus,h=>{const ee=!a.current;if(h.target===h.currentTarget&&ee&&!E){const J=new CustomEvent(de,wa);if(h.currentTarget.dispatchEvent(J),!J.defaultPrevented){const K=I().filter(R=>R.focusable),te=K.find(R=>R.active),se=K.find(R=>R.id===O),re=[te,se,...K].filter(Boolean).map(R=>R.ref.current);Qe(re,x)}}a.current=!1}),onBlur:V(t.onBlur,()=>_(!1))})})}),Je="RovingFocusGroupItem",qe=r.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:i,focusable:n=!0,active:m=!1,tabStopId:f,children:c,...N}=t,P=Ge(),j=f||P,x=Pa(Je,i),v=x.currentTabStopId===j,w=Ke(i),{onFocusableItemAdd:B,onFocusableItemRemove:G,currentTabStopId:O}=x;return r.useEffect(()=>{if(n)return B(),()=>G()},[n,B,G]),e.jsx(ue.ItemSlot,{scope:i,id:j,focusable:n,active:m,children:e.jsx(H.span,{tabIndex:v?0:-1,"data-orientation":x.orientation,...N,ref:o,onMouseDown:V(t.onMouseDown,b=>{n?x.onItemFocus(j):b.preventDefault()}),onFocus:V(t.onFocus,()=>x.onItemFocus(j)),onKeyDown:V(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){x.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const E=ka(b,x.orientation,x.dir);if(E!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let S=w().filter(I=>I.focusable).map(I=>I.ref.current);if(E==="last")S.reverse();else if(E==="prev"||E==="next"){E==="prev"&&S.reverse();const I=S.indexOf(b.currentTarget);S=x.loop?Ma(S,I+1):S.slice(I+1)}setTimeout(()=>Qe(S))}}),children:typeof c=="function"?c({isCurrentTabStop:v,hasTabStop:O!=null}):c})})});qe.displayName=Je;var Fa={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ta(t,o){return o!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ka(t,o,i){const n=Ta(t.key,i);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Fa[n]}function Qe(t,o=!1){const i=document.activeElement;for(const n of t)if(n===i||(n.focus({preventScroll:o}),document.activeElement!==i))return}function Ma(t,o){return t.map((i,n)=>t[(o+n)%t.length])}var Ea=He,_a=qe,ae="Tabs",[Da]=Be(ae,[Ye]),We=Ye(),[Ra,he]=Da(ae),Xe=r.forwardRef((t,o)=>{const{__scopeTabs:i,value:n,onValueChange:m,defaultValue:f,orientation:c="horizontal",dir:N,activationMode:P="automatic",...j}=t,x=$e(N),[v,w]=ze({prop:n,onChange:m,defaultProp:f??"",caller:ae});return e.jsx(Ra,{scope:i,baseId:Ge(),value:v,onValueChange:w,orientation:c,dir:x,activationMode:P,children:e.jsx(H.div,{dir:x,"data-orientation":c,...j,ref:o})})});Xe.displayName=ae;var Ze="TabsList",es=r.forwardRef((t,o)=>{const{__scopeTabs:i,loop:n=!0,...m}=t,f=he(Ze,i),c=We(i);return e.jsx(Ea,{asChild:!0,...c,orientation:f.orientation,dir:f.dir,loop:n,children:e.jsx(H.div,{role:"tablist","aria-orientation":f.orientation,...m,ref:o})})});es.displayName=Ze;var ss="TabsTrigger",as=r.forwardRef((t,o)=>{const{__scopeTabs:i,value:n,disabled:m=!1,...f}=t,c=he(ss,i),N=We(i),P=ns(c.baseId,n),j=is(c.baseId,n),x=n===c.value;return e.jsx(_a,{asChild:!0,...N,focusable:!m,active:x,children:e.jsx(H.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":j,"data-state":x?"active":"inactive","data-disabled":m?"":void 0,disabled:m,id:P,...f,ref:o,onMouseDown:V(t.onMouseDown,v=>{!m&&v.button===0&&v.ctrlKey===!1?c.onValueChange(n):v.preventDefault()}),onKeyDown:V(t.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(n)}),onFocus:V(t.onFocus,()=>{const v=c.activationMode!=="manual";!x&&!m&&v&&c.onValueChange(n)})})})});as.displayName=ss;var ts="TabsContent",rs=r.forwardRef((t,o)=>{const{__scopeTabs:i,value:n,forceMount:m,children:f,...c}=t,N=he(ts,i),P=ns(N.baseId,n),j=is(N.baseId,n),x=n===N.value,v=r.useRef(x);return r.useEffect(()=>{const w=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(w)},[]),e.jsx(ra,{present:m||x,children:({present:w})=>e.jsx(H.div,{"data-state":x?"active":"inactive","data-orientation":N.orientation,role:"tabpanel","aria-labelledby":P,hidden:!w,id:j,tabIndex:0,...c,ref:o,style:{...t.style,animationDuration:v.current?"0s":void 0},children:w&&f})})});rs.displayName=ts;function ns(t,o){return`${t}-trigger-${o}`}function is(t,o){return`${t}-content-${o}`}var La=Xe,ls=es,os=as,cs=rs;const Oa=La,ds=r.forwardRef(({className:t,...o},i)=>e.jsx(ls,{ref:i,className:me("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...o}));ds.displayName=ls.displayName;const W=r.forwardRef(({className:t,...o},i)=>e.jsx(os,{ref:i,className:me("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...o}));W.displayName=os.displayName;const X=r.forwardRef(({className:t,...o},i)=>e.jsx(cs,{ref:i,className:me("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...o}));X.displayName=cs.displayName;const Ua=()=>{const[t,o]=r.useState({}),[i,n]=r.useState([]),[m,f]=r.useState([]),[c,N]=r.useState([]),P=()=>{const a={id:Date.now().toString(),title:"",description:"",price:""};n([...i,a])},j=(a,l,D)=>{n(i.map(h=>h.id===a?{...h,[l]:D}:h))},x=a=>{n(i.filter(l=>l.id!==a))},v=()=>{const a={id:Date.now().toString(),name:"",role:"",content:"",rating:5};f([...m,a])},w=(a,l,D)=>{f(m.map(h=>h.id===a?{...h,[l]:D}:h))},B=a=>{f(m.filter(l=>l.id!==a))},G=()=>{const a={id:Date.now().toString(),title:"",description:"",validUntil:""};N([...c,a])},O=(a,l,D)=>{N(c.map(h=>h.id===a?{...h,[l]:D}:h))},b=a=>{N(c.filter(l=>l.id!==a))},E=a=>{o(a.about||{}),n(a.services||[]),f((a.testimonials||[]).map(l=>({id:l.id?.toString(),name:l.name,role:l.designation,content:l.message,rating:l.rating}))),N((a.offers||[]).map(l=>({id:l.id?.toString(),title:l.title,description:l.description,validUntil:l.valid_until||null})))},_=async()=>{try{y.loading("Fetching landing page data...",{id:"fetching"});const a=await ks();a.status===200&&a.data?.data?(E(a.data.data),y.success("Data loaded successfully",{id:"fetching"})):y.error("Failed to fetch landing page",{id:"fetching"})}catch(a){console.error("Error fetching landing page:",a),y.error("Something went wrong while fetching data",{id:"fetching"})}};r.useEffect(()=>{_()},[]);const S=async()=>{try{y.loading("Saving landing page...",{id:"saving"}),(await Ms([{type:"about",data:t},{type:"service",data:i},{type:"testimonial",data:m},{type:"offer",data:c}])).status===200?(y.success("Landing page updated successfully!",{id:"saving"}),await _()):y.error("Failed to update landing page",{id:"saving"})}catch(a){console.error("Error saving landing page:",a),y.error("Something went wrong while saving",{id:"saving"})}},I=()=>y("Opening preview...");return e.jsx("div",{className:"space-y-6",children:e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{className:"text-2xl font-heading",children:"Landing Page Editor"}),e.jsx(U,{children:"Customize your personal landing page to showcase your services and expertise"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs(p,{onClick:I,variant:"outline",className:"gap-2",children:[e.jsx(De,{className:"w-4 h-4"})," Preview"]}),e.jsxs(p,{onClick:S,className:"bg-primary hover:bg-primary/90 text-primary-foreground gap-2",children:[e.jsx(ja,{className:"w-4 h-4"})," Save & Publish"]})]}),e.jsxs(Oa,{defaultValue:"about",className:"space-y-6",children:[e.jsxs(ds,{className:"grid grid-cols-4 w-full",children:[e.jsx(W,{value:"about",children:"About Me"}),e.jsx(W,{value:"services",children:"Products / Services"}),e.jsx(W,{value:"testimonials",children:"Testimonials"}),e.jsx(W,{value:"offers",children:"Offers"})]}),e.jsx(X,{value:"about",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(g,{children:"Bio"}),e.jsx(Q,{rows:6,value:t.bio||"",onChange:a=>o({...t,bio:a.target.value}),placeholder:"Tell your story..."})]})}),e.jsxs(X,{value:"services",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"My Favorite Product / Services"}),e.jsxs(p,{onClick:P,size:"sm",className:"gap-2",children:[e.jsx(oe,{className:"w-4 h-4"})," Add"]})]}),i.map(a=>e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Service Title"}),e.jsx(M,{value:a.title,onChange:l=>j(a.id,"title",l.target.value),placeholder:"e.g., Brand Strategy Consultation"})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Description"}),e.jsx(Q,{rows:3,value:a.description,onChange:l=>j(a.id,"description",l.target.value),placeholder:"Describe your service..."})]})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>x(a.id),className:"ml-2 text-destructive",children:e.jsx(ce,{className:"w-4 h-4"})})]})})},a.id))]}),e.jsxs(X,{value:"testimonials",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Client Testimonials"}),e.jsxs(p,{onClick:v,size:"sm",className:"gap-2",children:[e.jsx(oe,{className:"w-4 h-4"})," Add"]})]}),m.map(a=>e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Name"}),e.jsx(M,{value:a.name,onChange:l=>w(a.id,"name",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Role/Company"}),e.jsx(M,{value:a.role,onChange:l=>w(a.id,"role",l.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Content"}),e.jsx(Q,{rows:3,value:a.content,onChange:l=>w(a.id,"content",l.target.value)})]}),e.jsx("div",{children:e.jsx(M,{type:"hidden",min:"1",max:"5",value:5,onChange:l=>w(a.id,"rating",l.target.value)})})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>B(a.id),className:"ml-2 text-destructive",children:e.jsx(ce,{className:"w-4 h-4"})})]})})},a.id))]}),e.jsxs(X,{value:"offers",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Promotional Offers"}),e.jsxs(p,{onClick:G,size:"sm",className:"gap-2",children:[e.jsx(oe,{className:"w-4 h-4"})," Add"]})]}),c.map(a=>e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Title"}),e.jsx(M,{value:a.title,onChange:l=>O(a.id,"title",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Description"}),e.jsx(Q,{rows:2,value:a.description,onChange:l=>O(a.id,"description",l.target.value)})]})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>b(a.id),className:"ml-2 text-destructive",children:e.jsx(ce,{className:"w-4 h-4"})})]})})},a.id))]})]})]})]})})},Va=({open:t,onOpenChange:o})=>{const[i,n]=r.useState(""),m=async f=>{if(f.preventDefault(),!i||i<=0){y.error("Please enter a valid number of days");return}try{const c=await Es({days:parseInt(i)});c.data.status?(y.success(c.data.message||"Feature activated successfully!"),n(""),o(!1)):y.error(c.data.message||"Failed to activate feature")}catch(c){y.error("Something went wrong while activating the feature."),console.error(c)}};return e.jsx(Le,{open:t,onOpenChange:o,children:e.jsxs(Oe,{className:"sm:max-w-md",children:[e.jsx(Ue,{children:e.jsx(Ve,{children:"Activate Feature"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"days",children:"Number of Days"}),e.jsx(M,{id:"days",type:"number",placeholder:"Enter number of days",value:i,onChange:f=>n(f.target.value),min:"1"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{type:"submit",className:"flex-1",children:"Activate"}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"Cancel"})]})]})]})})},et=t=>{const{props:o}=Fs(),i=o.auth?.user,[n,m]=r.useState("dashboard"),[f,c]=r.useState(!1),[N,P]=r.useState(!1),[j,x]=r.useState([]),[v,w]=r.useState(!1),[B,G]=r.useState(null),[O,b]=r.useState(!1),[E,_]=r.useState(!1),S=["Twinkle","Sparkle","Shine","Shine Plus"],[I,a]=r.useState(""),[l,D]=r.useState(""),[h,ee]=r.useState(""),[J,K]=r.useState(!1),[te,se]=r.useState(!1),[xe,re]=r.useState(null),[R,ne]=r.useState(null),[pe,ie]=r.useState(null),[us,ms]=r.useState([]),[hs,xs]=r.useState([]),[ps,fs]=r.useState([]),[Y,fe]=r.useState({state:"",industry:""}),[ge,je]=r.useState(""),[ve,be]=r.useState(""),[ye,Ne]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const d=await _s();d.data.status&&(xs(d.data.region||[]),fs(d.data.industry||[]))}catch(d){console.log("Failed to load filters",d)}})()},[]);const we=()=>{if(!u?.tier||u.tier.toLowerCase()==="free")return j;const s=S.findIndex(d=>d.toLowerCase()===u.tier.toLowerCase());return j.filter(d=>S.findIndex($=>$.toLowerCase()===d.title.toLowerCase())>s)},gs=async()=>{if(!I||!l||!h){y.error("Please fill in all fields");return}if(l!==h){y.error("New passwords do not match");return}K(!0);try{const s=await Ls({current_password:I,new_password:l,new_password_confirmation:h});s.data.status?(y.success(s.data.message||"Password updated successfully!"),a(""),D(""),ee("")):y.error(s.data.message||"Failed to update password")}catch(s){console.error(s),y.error("Something went wrong. Please try again.")}finally{K(!1)}},[u,Ce]=r.useState({name:i?.name||"Guest User",email:i?.email||"guest@example.com",phone:i?.phone||"",businessId:i?.business_type||"",businessType:t?.user?.business_type||"",stateId:i?.state||"",state:t?.user?.state||"",dob:i?.dob||"",bio:i?.bio||"",tier:t?.user?.tier_name||null,views:i?.views||0,featured:i?.featured,featured_valid:i?.featured_valid,image:i?.image}),js=s=>{if(!s||typeof s!="string")return[];try{const d=JSON.parse(s);return Array.isArray(d)?d:[]}catch{return console.warn("Failed to parse features:",s),[]}};r.useEffect(()=>{(async()=>{try{const $=((await Ds())?.data?.data||[]).map(A=>({id:A.id,title:A.tier_name,price:`$${A.price} / year`,features:js(A.feature),highlighted:A.highlighted===1||A.highlighted==="1"}));console.log("API Membership Plans:",$),x($)}catch(d){console.error("Failed to fetch membership plans:",d),x([])}})()},[]);const vs=s=>{Ce(s)},Se=s=>{G(s),w(!0)},bs=()=>{Ce(s=>({...s,views:s.views||0}))},le=()=>j.find(s=>s.title===u.tier),Ae=async()=>{try{const s=await Rs();s.data.status&&ms(s.data.data)}catch(s){console.log("Failed to fetch running ads",s)}};r.useEffect(()=>{Ae()},[]);const[ys,Ns]=r.useState([{id:1,title:"My Business Promotion",description:"Promote my services",link:"https://example.com",active:!0,image:null}]),ws=s=>{re(s),se(!0)},Cs=s=>{Ns(d=>d.map(L=>L.id===s.id?s:L))},Ss=s=>{const d=s.target.files?.[0];if(d){ne(d);const L=URL.createObjectURL(d);ie(L)}},As=async()=>{const s=new FormData;s.append("user_id",i.id),s.append("title",ge),s.append("link",ve),s.append("active",ye?1:0),Y.state&&s.append("region_id",Y.state),Y.industry&&s.append("industry_id",Y.industry),R&&s.append("image",R);try{(await Os(s)).data.status&&(y.success("Ad created!"),Ae(),je(""),be(""),ne(null),ie(null),Ne(!1),fe({state:"",industry:""}))}catch(d){console.log(d),y.error("Ad creation failed")}},Pe=(s,d)=>{fe(L=>({...L,[s]:d}))},Ps=()=>{switch(n){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(C,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Current Tier"}),e.jsx(Re,{className:"w-4 h-4 text-primary"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.tier||"No Plan"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.tier?"Active member":"Choose a plan"})]})]}),e.jsxs(C,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Profile Views"}),e.jsx(De,{className:"w-4 h-4 text-primary"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.views||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),e.jsxs(C,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Messages"}),e.jsx(ua,{className:"w-4 h-4 text-primary"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"3 unread"})]})]}),e.jsxs(C,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Featured"}),e.jsx(Ie,{className:"w-4 h-4 text-primary"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.featured?"Yes":""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.featured?(()=>{const s=new Date(u.featured_valid),d=s.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),$=s-new Date,A=Math.ceil($/(1e3*60*60*24));return e.jsxs("span",{children:["Expires on ",e.jsx("strong",{children:d}),A>0?` · ${A} day${A>1?"s":""} left`:" · Expired"]})})():e.jsx(p,{onClick:()=>{m("featured")},children:"Upgrade"})})]})]})]}),e.jsxs(C,{children:[e.jsx(F,{children:e.jsx(T,{children:"Quick Actions"})}),e.jsxs(k,{className:"flex flex-wrap gap-3",children:[e.jsx(p,{onClick:()=>c(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"View My Profile"}),e.jsx(p,{variant:"outline",onClick:()=>m("profile"),children:"Edit Profile"}),e.jsx(p,{variant:"outline",onClick:()=>m("chat"),children:"Check Messages"})]})]})]});case"profile":return e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"My Profile"}),e.jsx(U,{children:"View and edit your business information"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Full Name"}),e.jsx("p",{className:"text-lg font-semibold",children:u.name})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Email"}),e.jsx("p",{className:"text-lg",children:u.email})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Industry"}),e.jsx("p",{className:"text-lg",children:u.businessType||"Not set"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(p,{onClick:()=>P(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Edit Profile"}),e.jsx(p,{variant:"outline",onClick:()=>c(!0),children:"Preview Profile"})]})]})]});case"membership":return e.jsx("div",{className:"space-y-6",children:!u.tier||u.tier.toLowerCase()==="free plan"?e.jsxs(e.Fragment,{children:[e.jsx(C,{children:e.jsxs(F,{children:[e.jsx(T,{children:"Choose Your Membership Plan"}),e.jsx(U,{children:"Select a plan to unlock exclusive features"})]})}),j.length>0?e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:j.map(s=>e.jsx(Fe,{title:s.title,price:s.price,features:s.features,highlighted:s.highlighted,onJoin:()=>Se(s)},s.id))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading membership plans..."})})]}):e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"Your Membership"}),e.jsx(U,{children:"Manage your subscription and benefits"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:u.tier}),e.jsx(q,{className:"bg-primary text-primary-foreground",children:"Active"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:le()?.price||"N/A"}),e.jsx("ul",{className:"space-y-2 text-sm",children:le()?.features?.length>0?le().features.map((s,d)=>e.jsxs("li",{children:["✔ ",s]},d)):e.jsx("li",{className:"text-muted-foreground",children:"No features listed"})})]}),e.jsx("div",{className:"flex gap-3",children:we().length>0?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>_(!0),children:"Upgrade Plan"}),e.jsx(Le,{open:E,onOpenChange:_,children:e.jsxs(Oe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(Ve,{className:"text-2xl font-heading text-center",children:"Upgrade Your Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["You’re currently on ",e.jsx("strong",{children:u.tier})," plan — select a higher tier to unlock more benefits."]})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 mt-6",children:we().map(s=>e.jsx(Fe,{title:s.title,price:s.price,features:s.features,highlighted:s.highlighted,onJoin:()=>{Se(s),_(!1)}},s.id))}),e.jsx("div",{className:"pt-6 flex justify-center",children:e.jsx(p,{variant:"outline",onClick:()=>_(!1),children:"Close"})})]})})]}):e.jsx(p,{disabled:!0,className:"opacity-60 cursor-not-allowed",children:"You’re already on the highest plan"})})]})]})});case"ads":return e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"Ads Management"}),e.jsx(U,{children:"Create and manage promotional ads"})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ad-title",children:"Ad Title"}),e.jsx(M,{id:"ad-title",placeholder:"Promote your business",value:ge,onChange:s=>je(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ad-description",children:"Ad Description"}),e.jsx(Q,{id:"ad-description",placeholder:"Describe your ad..."})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"ad-link",children:"CTA Link"}),e.jsx(M,{id:"ad-link",placeholder:"https://...",value:ve,onChange:s=>be(s.target.value)})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"ad-state",children:"State"}),e.jsxs(Te,{value:Y.state,onValueChange:s=>Pe("state",s),children:[e.jsx(ke,{children:e.jsx(Me,{placeholder:"Select State"})}),e.jsx(Ee,{className:"bg-popover",children:hs.map(s=>e.jsx(_e,{value:s.regionId.toString(),children:s.regionName},s.regionId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"ad-industry",children:"Industry"}),e.jsxs(Te,{value:Y.industry,onValueChange:s=>Pe("industry",s),children:[e.jsx(ke,{children:e.jsx(Me,{placeholder:"Select Industry"})}),e.jsx(Ee,{className:"bg-popover",children:ps.map(s=>e.jsx(_e,{value:s.industryId.toString(),children:s.industryName},s.industryId))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Ad Image"}),e.jsxs("div",{className:"space-y-3",children:[pe?e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border",children:[e.jsx("img",{src:pe,alt:"Ad preview",className:"w-full h-48 object-cover"}),e.jsx(p,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>{ne(null),ie(null)},children:e.jsx(la,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors",onClick:()=>document.getElementById("new-ad-image")?.click(),children:[e.jsx(qs,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload image"})]}),e.jsx("input",{id:"new-ad-image",type:"file",accept:"image/*",className:"hidden",onChange:Ss})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{id:"ad-active",checked:ye,onCheckedChange:Ne}),e.jsx(g,{htmlFor:"ad-active",children:"Active"})]}),e.jsx(p,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:As,children:"Save Ad"})]}),e.jsxs("div",{className:"pt-6 border-t",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Your Ads"}),e.jsx("div",{className:"space-y-3",children:ys.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[s.image&&e.jsx("img",{src:s.image,alt:s.title,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsx(q,{variant:s.active?"default":"secondary",children:s.active?"Active":"Inactive"}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>ws(s),children:"Edit"})]},s.id))})]})]})]});case"editor":return e.jsx(Ua,{});case"chat":return e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"Messages"}),e.jsx(U,{children:"Connect with other members"})]}),e.jsx(k,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Conversations"}),[1,2,3].map(s=>e.jsxs("div",{className:"p-3 bg-muted rounded-lg cursor-pointer hover:bg-muted/80",children:[e.jsxs("div",{className:"font-medium",children:["Member ",s]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last message..."})]},s))]}),e.jsx("div",{className:"md:col-span-2 p-6 bg-muted rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Select a conversation to view messages"})})]})})]});case"featured":return e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"Featured Status"}),e.jsx(U,{children:"Your featured member benefits"})]}),e.jsx(k,{children:e.jsxs("div",{className:"p-6 bg-accent rounded-lg text-center",children:[e.jsx(Ie,{className:"w-16 h-16 mx-auto mb-4 text-accent-foreground"}),e.jsx("h3",{className:"font-semibold text-xl mb-2",children:u.featured?"You're Featured!":"Upgrade to Get Featured!"}),e.jsx("p",{className:"text-sm mb-4",children:u.featured?"Your profile is highlighted across the platform":"Get priority placement and visibility"}),e.jsx(p,{onClick:()=>!u.featured&&b(!0),className:`${u.featured?"bg-green-600 hover:bg-green-700 cursor-default":"bg-primary hover:bg-primary/90"} text-primary-foreground`,disabled:!!u.featured,children:u.featured?"Activated":"Activate"}),u.featured&&u.featured_valid&&(()=>{const s=new Date(u.featured_valid),d=s.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),$=s-new Date,A=Math.ceil($/(1e3*60*60*24));return e.jsxs("p",{className:`text-sm mt-3 ${A<=0?"text-red-500":A<=3?"text-yellow-500":"text-muted-foreground"}`,children:["Expires on ",e.jsx("strong",{children:d}),A>0?` · ${A} day${A>1?"s":""} left`:" · Expired"]})})()]})})]});case"settings":return e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"Account Settings"}),e.jsx(U,{children:"Manage your account preferences and security"})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Account Information"}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",type:"email",defaultValue:u.email,disabled:!0})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"font-semibold",children:"Change Password"}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"current-password",children:"Current Password"}),e.jsx(M,{id:"current-password",type:"password",placeholder:"Enter current password",value:I,onChange:s=>a(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"new-password",children:"New Password"}),e.jsx(M,{id:"new-password",type:"password",placeholder:"Enter new password",value:l,onChange:s=>D(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsx(M,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:h,onChange:s=>ee(s.target.value)})]}),e.jsx(p,{onClick:gs,className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:J,children:J?"Updating...":"Update Password"})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),e.jsx(p,{variant:"outline",size:"sm",children:"Configure"})]})]})]})]});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-background flex",children:[e.jsx(Na,{activeSection:n,onSectionChange:m}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"bg-card border-b border-[#F3D6E3] sticky top-0 z-10",children:e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-md",children:[e.jsx(na,{className:"w-5 h-5 text-muted-foreground"}),e.jsx(M,{placeholder:"Search...",className:"border-none bg-muted"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx($s,{className:"w-5 h-5"})}),e.jsxs(zs,{children:[e.jsx(Ks,{src:u.image,alt:u.name}),e.jsx(Ys,{children:u.name?.[0]||"G"})]})]})]})}),e.jsx("div",{className:"p-6 space-y-4 bg-muted/30",children:e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(T,{children:"Active Campaigns"}),e.jsx(U,{children:"View all running ads in a carousel"})]}),e.jsx(k,{children:e.jsxs(Xs,{className:"w-full",children:[e.jsx(Zs,{className:"-ml-2",children:us.filter(s=>s.active).map(s=>e.jsx(ea,{className:"pl-2 md:basis-1/2 lg:basis-1/3",children:e.jsx(C,{className:"p-4 border border-border/60 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[s.image&&e.jsx("div",{className:"w-full h-40 rounded-lg overflow-hidden bg-muted border",children:e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground truncate",children:s.title}),e.jsx(q,{variant:s.createdBy==="admin"?"default":"secondary",children:s.createdBy==="admin"?"Platform":"User"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 flex-wrap mb-2",children:[s.state&&e.jsx(q,{variant:"outline",className:"text-xs",children:s.state}),s.industry&&e.jsx(q,{variant:"outline",className:"text-xs",children:s.industry})]}),s.link&&e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline inline-block",children:"Learn More →"})]})]})})},s.id))}),e.jsx(sa,{}),e.jsx(aa,{})]})})]})}),e.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("h1",{className:"text-3xl font-heading mb-6",children:[n==="dashboard"&&"Welcome Back!",n==="profile"&&"My Profile",n==="membership"&&"Membership Plans",n==="editor"&&"Landing Page Editor",n==="chat"&&"Chat",n==="featured"&&"Featured",n==="settings"&&"Settings"]}),Ps()]})]}),e.jsx(ia,{profile:u,open:f,onOpenChange:c,onEdit:()=>{c(!1),P(!0)},onViewIncrement:bs}),e.jsx(Hs,{profile:u,open:N,onOpenChange:P,onSave:vs}),e.jsx(ta,{isOpen:v,onClose:()=>w(!1),tier:B}),e.jsx(Va,{open:O,onOpenChange:b}),e.jsx(Js,{ad:xe,open:te,onOpenChange:se,onSave:Cs})]})};export{et as default};
