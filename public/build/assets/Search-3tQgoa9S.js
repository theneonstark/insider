import{r as a,j as t}from"./app-DSyxH1s_.js";import{N as j,S as N,M as S,F as v}from"./MemberCard-Cp9D5-ew.js";import{D as b,l as x,z as o}from"./apis-DF2yDmUj.js";import"./select-CIOnT5CX.js";import"./badge-Bb8m2Inp.js";import"./use-toast-Bgvk0vhi.js";const R=()=>{const[l,i]=a.useState([]),[u,g]=a.useState({industry:[],region:[]}),[d,f]=a.useState(!0),[h,m]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const e=await b();e.status===200&&e.data.status===!0&&g({industry:e.data.industry||[],region:e.data.region||[]});const r=await x({});if(r.status===200&&r.data.status){const c=(r.data.data||[]).filter(y=>y.role!=="admin");i(c)}}catch(e){console.error("Error loading data:",e),o.error("Failed to load users")}finally{f(!1)}})()},[]);const p=async s=>{m(!0);try{const e=await x(s);if(e.status===200&&e.data.status){const n=(e.data.data||[]).filter(c=>c.role!=="admin");i(n),o.success(`${n.length} result${n.length>1?"s":""} found`)}else i([]),o.error("No results found")}catch(e){console.error("Search error:",e),o.error("Search failed")}finally{m(!1)}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(j,{}),t.jsx("section",{className:"py-20",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-heading text-center mb-4 text-foreground",children:"Find a Superstar"}),t.jsx("p",{className:"text-center text-lg text-muted-foreground mb-12",children:"Search members by name, location, or industry"}),t.jsx("div",{className:"max-w-3xl mx-auto mb-12",children:d?t.jsx("div",{className:"text-center py-10 text-muted-foreground animate-pulse",children:"Loading filters..."}):t.jsx(N,{industries:u.industry,regions:u.region,onSearch:p})}),d||h?t.jsx("div",{className:"text-center py-20 text-muted-foreground animate-pulse",children:d?"Loading users...":"Searching..."}):l.length>0?t.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-8 transition-all duration-300",children:l.map((s,e)=>t.jsx(S,{name:s.name,title:s.business_type||"No title",tier:s.tier||"Member",image:s.image?s.image:"/assets/default-profile.png",views:s.views||0},e))}):t.jsx("div",{className:"text-center text-muted-foreground py-20",children:"No members found. Try another filter."})]})}),t.jsx(v,{})]})};export{R as default};
