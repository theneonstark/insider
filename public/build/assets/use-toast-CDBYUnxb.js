import{u as D,r as o,j as s,a as S}from"./app-Bpr-k0UO.js";import{D as _,a as I,c as O}from"./dialog-BOUVdgMR.js";import{B as c}from"./createLucideIcon-nG-ulZxx.js";import{B as R,E as M}from"./badge-ig6jp55S.js";import{n as B,F as k,o as q,z as p,s as P}from"./apis-BVPVRX3N.js";const H=({profile:e,open:t,onOpenChange:n,onEdit:a,onViewIncrement:d})=>{const{props:j}=D(),u=j?.auth?.user,N=j?.auth?.user?.role,[x,T]=o.useState("none"),[w,v]=o.useState(null),[E,A]=o.useState(Number(e?.views||0));o.useEffect(()=>{A(Number(e?.views||0))},[e,t]),o.useEffect(()=>{t&&e&&h()},[t]);const h=async()=>{try{const r=await B(e.id);T(r.data.status),v(r.data.connection_id)}catch(r){console.log(r)}},C=async()=>{if(!u)return S.visit("/login");try{await P(u,e.id),p.success("Connection Request Sent!"),h()}catch(r){console.log(r),p.error(r.response?.data?.message||"Error!")}},y=()=>u?x==="accepted"?s.jsx(c,{disabled:!0,className:"bg-green-600 text-white",children:"Connected"}):x==="sent"?s.jsx(c,{disabled:!0,className:"bg-yellow-500 text-white",children:"Request Sent"}):x==="received"?s.jsx(c,{onClick:async()=>{await q(w),p.success("Request Accepted!"),h()},className:"bg-blue-600 text-white",children:"Accept Request"}):s.jsx(c,{onClick:C,children:"Let's Connect"}):s.jsx(c,{onClick:()=>S.visit("/login"),children:"Let's Connect"});return e?s.jsx(_,{open:t,onOpenChange:n,children:s.jsxs(I,{className:"max-w-3xl rounded-2xl p-0 overflow-hidden shadow-2xl border border-border bg-background",children:[s.jsx("div",{className:"w-full h-40 bg-gradient-to-r from-primary/80 to-pink-500/80 flex items-end px-6 py-4",children:s.jsx(O,{className:"text-3xl font-bold text-white drop-shadow-lg",children:e?.name})}),s.jsxs("div",{className:"px-8 py-6 space-y-10",children:[s.jsxs("div",{className:"flex flex-col items-center -mt-20",children:[s.jsx("img",{src:N==="admin"?`../${e.image}`:e.image,alt:e.name,className:"w-36 h-36 rounded-full object-cover ring-4 ring-white shadow-xl"}),s.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[s.jsx(R,{className:"bg-primary text-primary-foreground text-sm px-3 py-1 rounded-full shadow",children:e?.tier?.tier_name||"Member"}),s.jsxs("div",{className:"flex items-center bg-muted px-3 py-1 rounded-full shadow-sm border",children:[s.jsx(M,{className:"w-4 h-4 text-primary mr-1"}),s.jsx("span",{className:"font-semibold",children:E})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Full Name"}),s.jsx("p",{className:"text-lg font-semibold",children:e.name})]}),e?.businessType&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Business Type"}),s.jsx("p",{className:"text-lg",children:e.businessType})]}),e?.region?.regionName&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"State"}),s.jsx("p",{className:"text-lg",children:e.region.regionName})]}),e?.dob&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Date of Birth"}),s.jsx("p",{className:"text-lg",children:e.dob})]}),e?.bio&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Date of Birth"}),s.jsx("p",{className:"text-lg",children:e.bio||"User not set the bio"})]})]}),s.jsxs("div",{className:"flex flex-wrap justify-between gap-3 pt-6 border-t",children:[s.jsxs("div",{className:"flex gap-3",children:[N!=="admin"&&a&&s.jsx(c,{onClick:a,className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-md px-6",children:"Edit Profile"}),y&&s.jsx("div",{className:"shadow-md",children:y()})]}),s.jsx(c,{variant:"outline",className:"px-6 shadow-sm",onClick:()=>n(!1),children:"Close"})]})]}),s.jsx(k,{})]})}):null},V=1,F=1e6;let g=0;function L(){return g=(g+1)%Number.MAX_SAFE_INTEGER,g.toString()}const f=new Map,b=e=>{if(f.has(e))return;const t=setTimeout(()=>{f.delete(e),i({type:"REMOVE_TOAST",toastId:e})},F);f.set(e,t)},U=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,V)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?b(n):e.toasts.forEach(a=>{b(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===n||n===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},l=[];let m={toasts:[]};function i(e){m=U(m,e),l.forEach(t=>{t(m)})}function z({...e}){const t=L(),n=d=>i({type:"UPDATE_TOAST",toast:{...d,id:t}}),a=()=>i({type:"DISMISS_TOAST",toastId:t});return i({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:d=>{d||a()}}}),{id:t,dismiss:a,update:n}}function J(){const[e,t]=o.useState(m);return o.useEffect(()=>(l.push(t),()=>{const n=l.indexOf(t);n>-1&&l.splice(n,1)}),[e]),{...e,toast:z,dismiss:n=>i({type:"DISMISS_TOAST",toastId:n})}}export{H as P,J as u};
