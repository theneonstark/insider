import{c as b}from"./createLucideIcon-CEetH4QU.js";import{a as Z,r as l,j as e}from"./app-SQBbOcLR.js";import{c as ee,l as ae,m as C,S as F,e as _,f as P,g as M,h as T}from"./select-BWJp9MXD.js";import{P as k,I as j,F as te,D as re,z as N,d as se}from"./apis-C-LB-TNB.js";import{c as I,B as E}from"./index-16-0nrMD.js";import{D as ne,a as oe,b as ie,c as le}from"./ProfileViewModal-CCyOmWKi.js";import{L as x}from"./label-C6PrGJJ1.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],De=b("award",de);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Fe=b("bell",ce);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_e=b("house",ue);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Pe=b("log-out",fe);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Me=b("settings",me);var L={exports:{}},A={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U;function he(){if(U)return A;U=1;var t=Z();function n(d,i){return d===i&&(d!==0||1/d===1/i)||d!==d&&i!==i}var o=typeof Object.is=="function"?Object.is:n,c=t.useState,a=t.useEffect,s=t.useLayoutEffect,h=t.useDebugValue;function f(d,i){var g=i(),S=c({inst:{value:g,getSnapshot:i}}),v=S[0].inst,r=S[1];return s(function(){v.value=g,v.getSnapshot=i,u(v)&&r({inst:v})},[d,g,i]),a(function(){return u(v)&&r({inst:v}),d(function(){u(v)&&r({inst:v})})},[d]),h(g),g}function u(d){var i=d.getSnapshot;d=d.value;try{var g=i();return!o(d,g)}catch{return!0}}function p(d,i){return i()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return A.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,A}var $;function ge(){return $||($=1,L.exports=he()),L.exports}var pe=ge();function ve(){return pe.useSyncExternalStore(xe,()=>!0,()=>!1)}function xe(){return()=>{}}var R="Avatar",[ye]=ee(R),[Se,H]=ye(R),V=l.forwardRef((t,n)=>{const{__scopeAvatar:o,...c}=t,[a,s]=l.useState("idle");return e.jsx(Se,{scope:o,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:e.jsx(k.span,{...c,ref:n})})});V.displayName=R;var q="AvatarImage",z=l.forwardRef((t,n)=>{const{__scopeAvatar:o,src:c,onLoadingStatusChange:a=()=>{},...s}=t,h=H(q,o),f=je(c,s),u=ae(p=>{a(p),h.onImageLoadingStatusChange(p)});return C(()=>{f!=="idle"&&u(f)},[f,u]),f==="loaded"?e.jsx(k.img,{...s,ref:n,src:c}):null});z.displayName=q;var O="AvatarFallback",G=l.forwardRef((t,n)=>{const{__scopeAvatar:o,delayMs:c,...a}=t,s=H(O,o),[h,f]=l.useState(c===void 0);return l.useEffect(()=>{if(c!==void 0){const u=window.setTimeout(()=>f(!0),c);return()=>window.clearTimeout(u)}},[c]),h&&s.imageLoadingStatus!=="loaded"?e.jsx(k.span,{...a,ref:n}):null});G.displayName=O;function B(t,n){return t?n?(t.src!==n&&(t.src=n),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function je(t,{referrerPolicy:n,crossOrigin:o}){const c=ve(),a=l.useRef(null),s=c?(a.current||(a.current=new window.Image),a.current):null,[h,f]=l.useState(()=>B(s,t));return C(()=>{f(B(s,t))},[s,t]),C(()=>{const u=d=>()=>{f(d)};if(!s)return;const p=u("loaded"),y=u("error");return s.addEventListener("load",p),s.addEventListener("error",y),n&&(s.referrerPolicy=n),typeof o=="string"&&(s.crossOrigin=o),()=>{s.removeEventListener("load",p),s.removeEventListener("error",y)}},[s,o,n]),h}var W=V,K=z,J=G;const be=l.forwardRef(({className:t,...n},o)=>e.jsx(W,{ref:o,className:I("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n}));be.displayName=W.displayName;const we=l.forwardRef(({className:t,...n},o)=>e.jsx(K,{ref:o,className:I("aspect-square h-full w-full",t),...n}));we.displayName=K.displayName;const Ne=l.forwardRef(({className:t,...n},o)=>e.jsx(J,{ref:o,className:I("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n}));Ne.displayName=J.displayName;const Q=l.forwardRef(({className:t,...n},o)=>e.jsx("textarea",{className:I("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:o,...n}));Q.displayName="Textarea";const Te=({profile:t,open:n,onOpenChange:o,onSave:c})=>{const[a,s]=l.useState(null),[h,f]=l.useState({industry:[],region:[]}),[u,p]=l.useState(!1),[y,d]=l.useState(!0),[i,g]=l.useState(null);if(l.useEffect(()=>{t&&(s({...t}),typeof t.image=="string"&&t.image.trim()!==""?g(t.image):g(null))},[t]),l.useEffect(()=>()=>{i&&i.startsWith("blob:")&&URL.revokeObjectURL(i)},[i]),l.useEffect(()=>{(async()=>{try{const m=await re();m.status===200&&m.data.status===!0?f({industry:m.data.industry||[],region:m.data.region||[]}):N.error("Failed to load dropdown data.")}catch(m){console.error("Dropdown fetch error:",m),N.error("Unable to load dropdowns.")}finally{d(!1)}})()},[]),!a)return null;const S=r=>{const m=r.target.files?.[0];m&&(s(w=>({...w,image:m})),g(URL.createObjectURL(m)))},v=async()=>{p(!0);try{let r=a,m=!1;if(a.image instanceof File){const D=new FormData;Object.entries(a).forEach(([X,Y])=>{D.append(X,Y??"")}),r=D,m=!0}const w=await se(r,m);if(w.status===200)c(a),N.success(w.data.message||"Profile updated successfully",{duration:2e3}),o(!1);else throw new Error("Failed to update profile")}catch(r){console.error("Error updating profile:",r),N.error("Failed to update profile. Please try again.")}finally{p(!1)}};return e.jsxs(ne,{open:n,onOpenChange:o,children:[e.jsxs(oe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsx(le,{className:"text-2xl font-heading",children:"Edit Profile"})}),y?e.jsx("div",{className:"text-center py-6",children:"Loading dropdown data..."}):e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Full Name"}),e.jsx(j,{id:"name",value:a.name||"",onChange:r=>s({...a,name:r.target.value.trimStart()})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"email",children:"Email Address"}),e.jsx(j,{id:"email",type:"email",value:a.email||"",onChange:r=>s({...a,email:r.target.value.trimStart()})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"phone",children:"Phone Number"}),e.jsx(j,{id:"phone",value:a.phone||"",onChange:r=>s({...a,phone:r.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"industry",children:"Industry"}),e.jsxs(F,{value:a.businessId?a.businessId.toString():"",onValueChange:r=>s({...a,businessId:parseInt(r)}),children:[e.jsx(_,{className:"w-full",children:e.jsx(P,{placeholder:h.industry.find(r=>r.industryId===a.businessId)?.industryName||"-- Select Industry --"})}),e.jsx(M,{children:h.industry.map(r=>e.jsx(T,{value:r.industryId.toString(),children:r.industryName},r.industryId))})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"region",children:"Region"}),e.jsxs(F,{value:a.stateId?a.stateId.toString():"",onValueChange:r=>s({...a,stateId:parseInt(r)}),children:[e.jsx(_,{className:"w-full",children:e.jsx(P,{placeholder:h.region.find(r=>r.regionId===a.stateId)?.regionName||"-- Select Region --"})}),e.jsx(M,{children:h.region.map(r=>e.jsx(T,{value:r.regionId.toString(),children:r.regionName},r.regionId))})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"dob",children:"Date of Birth"}),e.jsx(j,{id:"dob",type:"date",value:a.dob||"",onChange:r=>s({...a,dob:r.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"bio",children:"Bio"}),e.jsx(Q,{id:"bio",rows:4,value:a.bio||"",onChange:r=>s({...a,bio:r.target.value}),placeholder:"Tell us about yourself and your business..."})]}),e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx(x,{htmlFor:"image",children:"Profile Picture"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i||(typeof a.image=="string"?a.image:"https://cdn-icons-png.flaticon.com/512/847/847969.png"),alt:"Profile",className:"h-28 w-28 rounded-full object-cover border shadow-sm"}),i&&e.jsx("button",{type:"button",onClick:()=>{s({...a,image:null}),g(null)},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5 hover:bg-red-600",children:"âœ•"})]}),e.jsxs("div",{children:[e.jsx(j,{id:"image",type:"file",accept:"image/*",className:"hidden",onChange:S}),e.jsx(E,{type:"button",variant:"outline",onClick:()=>document.getElementById("image").click(),children:i?"Change Photo":"Upload Photo"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(E,{onClick:v,className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:u,children:u?"Saving...":"Save Changes"}),e.jsx(E,{variant:"outline",onClick:()=>o(!1),disabled:u,children:"Cancel"})]})]})]}),e.jsx(te,{})]})};export{De as A,Fe as B,Te as E,_e as H,Pe as L,Me as S,Q as T,be as a,Ne as b,we as c};
