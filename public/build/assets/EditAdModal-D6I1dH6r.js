import{c as C}from"./createLucideIcon-DybQjqWg.js";import{r as i,j as e,a as he}from"./app-CfO8-n_1.js";import{i as me,e as q,g as fe,k as pe,l as ve,j as ge,m as U,S as L,a as R,b as _,c as F,d as j}from"./select-D5xm67Ur.js";import{P as A,I as k,F as xe,D as je,z as w,n as ye,f as be}from"./apis-C0X6QIXL.js";import{u as z,c as E,B as I}from"./index-CaGW5K1q.js";import{D as O,a as G,b as W,c as X,X as Se}from"./ProfileViewModal-J7DCeJGS.js";import{L as y}from"./label-CQgC5BRu.js";var P="Switch",[we]=q(P),[Ne,ke]=we(P),J=i.forwardRef((a,o)=>{const{__scopeSwitch:r,name:d,checked:s,defaultChecked:n,required:p,disabled:f,value:h="on",onCheckedChange:u,form:v,...m}=a,[l,g]=i.useState(null),b=z(o,N=>g(N)),x=i.useRef(!1),t=l?v||!!l.closest("form"):!0,[c,S]=me({prop:s,defaultProp:n??!1,onChange:u,caller:P});return e.jsxs(Ne,{scope:r,checked:c,disabled:f,children:[e.jsx(A.button,{type:"button",role:"switch","aria-checked":c,"aria-required":p,"data-state":Z(c),"data-disabled":f?"":void 0,disabled:f,value:h,...m,ref:b,onClick:fe(a.onClick,N=>{S(D=>!D),t&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),t&&e.jsx(Q,{control:l,bubbles:!x.current,name:d,value:h,checked:c,required:p,disabled:f,form:v,style:{transform:"translateX(-100%)"}})]})});J.displayName=P;var K="SwitchThumb",Y=i.forwardRef((a,o)=>{const{__scopeSwitch:r,...d}=a,s=ke(K,r);return e.jsx(A.span,{"data-state":Z(s.checked),"data-disabled":s.disabled?"":void 0,...d,ref:o})});Y.displayName=K;var Ce="SwitchBubbleInput",Q=i.forwardRef(({__scopeSwitch:a,control:o,checked:r,bubbles:d=!0,...s},n)=>{const p=i.useRef(null),f=z(p,n),h=pe(r),u=ve(o);return i.useEffect(()=>{const v=p.current;if(!v)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==r&&g){const b=new Event("click",{bubbles:d});g.call(v,r),v.dispatchEvent(b)}},[h,r,d]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:f,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q.displayName=Ce;function Z(a){return a?"checked":"unchecked"}var Ie=J,Ee=Y;const ee=i.forwardRef((a,o)=>{const{className:r,...d}=a;return e.jsx(Ie,{className:E("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...d,ref:o,children:e.jsx(Ee,{className:E("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ee.displayName="Switch";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],tt=C("award",Ae);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],at=C("bell",Le);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],st=C("chart-column",Re);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],rt=C("house",_e);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nt=C("log-out",Fe);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ot=C("settings",Pe);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Me=C("upload",De);var M={exports:{}},T={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H;function Te(){if(H)return T;H=1;var a=he();function o(m,l){return m===l&&(m!==0||1/m===1/l)||m!==m&&l!==l}var r=typeof Object.is=="function"?Object.is:o,d=a.useState,s=a.useEffect,n=a.useLayoutEffect,p=a.useDebugValue;function f(m,l){var g=l(),b=d({inst:{value:g,getSnapshot:l}}),x=b[0].inst,t=b[1];return n(function(){x.value=g,x.getSnapshot=l,h(x)&&t({inst:x})},[m,g,l]),s(function(){return h(x)&&t({inst:x}),m(function(){h(x)&&t({inst:x})})},[m]),p(g),g}function h(m){var l=m.getSnapshot;m=m.value;try{var g=l();return!r(m,g)}catch{return!0}}function u(m,l){return l()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:f;return T.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:v,T}var $;function Ue(){return $||($=1,M.exports=Te()),M.exports}var Be=Ue();function He(){return Be.useSyncExternalStore($e,()=>!0,()=>!1)}function $e(){return()=>{}}var B="Avatar",[Ve]=q(B),[qe,te]=Ve(B),ae=i.forwardRef((a,o)=>{const{__scopeAvatar:r,...d}=a,[s,n]=i.useState("idle");return e.jsx(qe,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:n,children:e.jsx(A.span,{...d,ref:o})})});ae.displayName=B;var se="AvatarImage",re=i.forwardRef((a,o)=>{const{__scopeAvatar:r,src:d,onLoadingStatusChange:s=()=>{},...n}=a,p=te(se,r),f=ze(d,n),h=ge(u=>{s(u),p.onImageLoadingStatusChange(u)});return U(()=>{f!=="idle"&&h(f)},[f,h]),f==="loaded"?e.jsx(A.img,{...n,ref:o,src:d}):null});re.displayName=se;var ne="AvatarFallback",oe=i.forwardRef((a,o)=>{const{__scopeAvatar:r,delayMs:d,...s}=a,n=te(ne,r),[p,f]=i.useState(d===void 0);return i.useEffect(()=>{if(d!==void 0){const h=window.setTimeout(()=>f(!0),d);return()=>window.clearTimeout(h)}},[d]),p&&n.imageLoadingStatus!=="loaded"?e.jsx(A.span,{...s,ref:o}):null});oe.displayName=ne;function V(a,o){return a?o?(a.src!==o&&(a.src=o),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ze(a,{referrerPolicy:o,crossOrigin:r}){const d=He(),s=i.useRef(null),n=d?(s.current||(s.current=new window.Image),s.current):null,[p,f]=i.useState(()=>V(n,a));return U(()=>{f(V(n,a))},[n,a]),U(()=>{const h=m=>()=>{f(m)};if(!n)return;const u=h("loaded"),v=h("error");return n.addEventListener("load",u),n.addEventListener("error",v),o&&(n.referrerPolicy=o),typeof r=="string"&&(n.crossOrigin=r),()=>{n.removeEventListener("load",u),n.removeEventListener("error",v)}},[n,r,o]),p}var ie=ae,le=re,ce=oe;const Oe=i.forwardRef(({className:a,...o},r)=>e.jsx(ie,{ref:r,className:E("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...o}));Oe.displayName=ie.displayName;const Ge=i.forwardRef(({className:a,...o},r)=>e.jsx(le,{ref:r,className:E("aspect-square h-full w-full",a),...o}));Ge.displayName=le.displayName;const We=i.forwardRef(({className:a,...o},r)=>e.jsx(ce,{ref:r,className:E("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...o}));We.displayName=ce.displayName;const de=i.forwardRef(({className:a,...o},r)=>e.jsx("textarea",{className:E("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...o}));de.displayName="Textarea";const it=({profile:a,open:o,onOpenChange:r,onSave:d})=>{const[s,n]=i.useState(null),[p,f]=i.useState({industry:[],region:[]}),[h,u]=i.useState(!1),[v,m]=i.useState(!0),[l,g]=i.useState(null);if(i.useEffect(()=>{a&&(n({...a}),typeof a.image=="string"&&a.image.trim()!==""?g(a.image):g(null))},[a]),i.useEffect(()=>()=>{l&&l.startsWith("blob:")&&URL.revokeObjectURL(l)},[l]),i.useEffect(()=>{(async()=>{try{const c=await je();c.status===200&&c.data.status===!0?f({industry:c.data.industry||[],region:c.data.region||[]}):w.error("Failed to load dropdown data.")}catch(c){console.error("Dropdown fetch error:",c),w.error("Unable to load dropdowns.")}finally{m(!1)}})()},[]),!s)return null;const b=t=>{const c=t.target.files?.[0];c&&(n(S=>({...S,image:c})),g(URL.createObjectURL(c)))},x=async()=>{u(!0);try{let t=s,c=!1;if(s.image instanceof File){const N=new FormData;Object.entries(s).forEach(([D,ue])=>{N.append(D,ue??"")}),t=N,c=!0}const S=await ye(t,c);if(S.status===200)d(s),w.success(S.data.message||"Profile updated successfully",{duration:2e3}),r(!1);else throw new Error("Failed to update profile")}catch(t){console.error("Error updating profile:",t),w.error("Failed to update profile. Please try again.")}finally{u(!1)}};return e.jsxs(O,{open:o,onOpenChange:r,children:[e.jsxs(G,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(W,{children:e.jsx(X,{className:"text-2xl font-heading",children:"Edit Profile"})}),v?e.jsx("div",{className:"text-center py-6",children:"Loading dropdown data..."}):e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"name",children:"Full Name"}),e.jsx(k,{id:"name",value:s.name||"",onChange:t=>n({...s,name:t.target.value.trimStart()})})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"email",children:"Email Address"}),e.jsx(k,{id:"email",type:"email",value:s.email||"",onChange:t=>n({...s,email:t.target.value.trimStart()})})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"phone",children:"Phone Number"}),e.jsx(k,{id:"phone",value:s.phone||"",onChange:t=>n({...s,phone:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"industry",children:"Industry"}),e.jsxs(L,{value:s.businessId?s.businessId.toString():"",onValueChange:t=>n({...s,businessId:parseInt(t)}),children:[e.jsx(R,{className:"w-full",children:e.jsx(_,{placeholder:p.industry.find(t=>t.industryId===s.businessId)?.industryName||"-- Select Industry --"})}),e.jsx(F,{children:p.industry.map(t=>e.jsx(j,{value:t.industryId.toString(),children:t.industryName},t.industryId))})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"region",children:"State"}),e.jsxs(L,{value:s.stateId?s.stateId.toString():"",onValueChange:t=>n({...s,stateId:parseInt(t)}),children:[e.jsx(R,{className:"w-full",children:e.jsx(_,{placeholder:p.region.find(t=>t.regionId===s.stateId)?.regionName||"-- Select State --"})}),e.jsx(F,{children:p.region.map(t=>e.jsx(j,{value:t.regionId.toString(),children:t.regionName},t.regionId))})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"dob",children:"Date of Birth"}),e.jsx(k,{id:"dob",type:"date",value:s.dob||"",onChange:t=>n({...s,dob:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"bio",children:"Bio"}),e.jsx(de,{id:"bio",rows:4,value:s.bio||"",onChange:t=>n({...s,bio:t.target.value}),placeholder:"Tell us about yourself and your business in 250 words or less."})]}),e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx(y,{htmlFor:"image",children:"Profile Picture"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l||(typeof s.image=="string"?s.image:"https://cdn-icons-png.flaticon.com/512/847/847969.png"),alt:"Profile",className:"h-28 w-28 rounded-full object-cover border shadow-sm"}),l&&e.jsx("button",{type:"button",onClick:()=>{n({...s,image:null}),g(null)},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5 hover:bg-red-600",children:"âœ•"})]}),e.jsxs("div",{children:[e.jsx(k,{id:"image",type:"file",accept:"image/*",className:"hidden",onChange:b}),e.jsx(I,{type:"button",variant:"outline",onClick:()=>document.getElementById("image").click(),children:l?"Change Photo":"Upload Photo"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(I,{onClick:x,className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:h,children:h?"Saving...":"Save Changes"}),e.jsx(I,{variant:"outline",onClick:()=>r(!1),disabled:h,children:"Cancel"})]})]})]}),e.jsx(xe,{})]})},lt=({ad:a,open:o,onOpenChange:r,onSave:d})=>{const s=i.useRef(null),[n,p]=i.useState(null),[f,h]=i.useState(!1),[u,v]=i.useState({title:"",link:"",image:null,active:!0});i.useEffect(()=>{a&&(v({title:a.title||"",link:a.link||"",image:null,active:a.active??!0}),p(null),h(!1))},[a]);const m=()=>{if(!u.title.trim()){w.error("Title is required");return}const t=new FormData;t.append("title",u.title),t.append("link",u.link),t.append("active",u.active?1:0),u.image instanceof File&&t.append("image",u.image),f&&t.append("remove_image",1),d(a.id,t),r(!1)},l=(t,c)=>{v(S=>({...S,[t]:c}))},g=t=>{const c=t.target.files?.[0];if(c){if(c.size>5*1024*1024){w.error("File too large");return}v(S=>({...S,image:c})),p(URL.createObjectURL(c)),h(!0)}},b=()=>{p(null),v(t=>({...t,image:null})),h(!0),s.current&&(s.current.value="")},x=async t=>{v(c=>({...c,active:t}));try{(await be(a.id,{active:t?1:0})).data.status?w.success("Status updated"):w.error("Failed to update")}catch(c){console.error(c),w.error("Error updating status")}};return e.jsx(O,{open:o,onOpenChange:r,children:e.jsxs(G,{className:"sm:max-w-md",children:[e.jsx(W,{children:e.jsx(X,{children:"Edit Advertisement"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"ad-title",children:"Ad Title"}),e.jsx(k,{id:"ad-title",value:u.title,onChange:t=>l("title",t.target.value),placeholder:"Enter ad title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"ad-link",children:"Link URL"}),e.jsx(k,{id:"ad-link",value:u.link,onChange:t=>l("link",t.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"ad-state",children:"State"}),e.jsxs(L,{value:u.state,onValueChange:t=>l("state",t),children:[e.jsx(R,{children:e.jsx(_,{placeholder:"Select State"})}),e.jsxs(F,{className:"bg-popover",children:[e.jsx(j,{value:"new-york",children:"New York"}),e.jsx(j,{value:"los-angeles",children:"Los Angeles"}),e.jsx(j,{value:"chicago",children:"Chicago"}),e.jsx(j,{value:"houston",children:"Houston"}),e.jsx(j,{value:"california",children:"California"}),e.jsx(j,{value:"texas",children:"Texas"}),e.jsx(j,{value:"florida",children:"Florida"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"ad-industry",children:"Industry"}),e.jsxs(L,{value:u.industry,onValueChange:t=>l("industry",t),children:[e.jsx(R,{children:e.jsx(_,{placeholder:"Select Industry"})}),e.jsxs(F,{className:"bg-popover",children:[e.jsx(j,{value:"marketing",children:"Marketing"}),e.jsx(j,{value:"tech",children:"Technology"}),e.jsx(j,{value:"creative",children:"Creative Services"}),e.jsx(j,{value:"consulting",children:"Consulting"}),e.jsx(j,{value:"finance",children:"Finance"}),e.jsx(j,{value:"healthcare",children:"Healthcare"}),e.jsx(j,{value:"education",children:"Education"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Ad Image"}),e.jsxs("div",{className:"space-y-3",children:[n||!f&&a?.image?e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border",children:[e.jsx("img",{src:n||(!f&&a?.image?`../${a.image}`:null),alt:"Ad preview",className:"w-full h-48 object-cover"}),e.jsx(I,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2",onClick:b,children:e.jsx(Se,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors",onClick:()=>s.current?.click(),children:[e.jsx(Me,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload image"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG up to 5MB"})]}),e.jsx("input",{ref:s,type:"file",accept:"image/*",className:"hidden",onChange:g})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{id:"ad-active",checked:u.active,onCheckedChange:x}),e.jsx(y,{htmlFor:"ad-active",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(I,{onClick:m,className:"flex-1",children:"Save Changes"}),e.jsx(I,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})]})]})]})})};export{tt as A,at as B,st as C,it as E,rt as H,nt as L,ot as S,de as T,Me as U,Oe as a,We as b,lt as c,ee as d,Ge as e};
