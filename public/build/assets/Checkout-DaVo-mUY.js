import{u as y,j as e,H as b,r as n}from"./app-BRKN9AGO.js";import{E as S,l as j,u as g,a as P,C as u}from"./react-stripe.esm-CHC9AaNS.js";const C=j("pk_test_51KK8rzL1r3PzNdUEpPZaQ5kitAm7ys2nrZsrNPKRTnJCRBYlLxBm6udmCXZs0RSY35YekBUYL3vOSYvhpgz3SQPT009nJGeGov"),E=({amount:t})=>{const s=g(),c=P(),[o,l]=n.useState(!1),[i,d]=n.useState(null),[a,p]=n.useState("");n.useEffect(()=>{fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({amount:t})}).then(r=>r.json()).then(r=>p(r.clientSecret)).catch(()=>d("Failed to initialize payment"))},[t]);const x=async r=>{if(r.preventDefault(),!s||!c||!a)return;l(!0);const h=c.getElement(u),{error:m,paymentIntent:f}=await s.confirmCardPayment(a,{payment_method:{card:h}});m?(d(m.message),l(!1)):f.status==="succeeded"&&alert("Payment Successful! ðŸŽ‰")};return e.jsxs("form",{onSubmit:x,className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Pay â‚¹",t/100]}),e.jsx("div",{className:"mb-4 p-3 border rounded",children:e.jsx(u,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}}}}})}),i&&e.jsx("div",{className:"text-red-500 mb-4",children:i}),e.jsx("button",{type:"submit",disabled:!s||o||!a,className:"w-full bg-blue-600 text-white py-2 rounded disabled:opacity-50",children:o?"Processing...":`Pay â‚¹${t/100}`})]})};function v(){const{stripeKey:t,amount:s}=y().props;return e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Checkout"}),e.jsx("div",{className:"min-h-screen bg-gray-100 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Secure Checkout"}),e.jsx(S,{stripe:C,children:e.jsx(E,{amount:s})})]})})]})}export{v as default};
