import{u as z,c as _,a as C,B as I}from"./createLucideIcon-nG-ulZxx.js";import{r as d,j as e,b as fe}from"./app-Bpr-k0UO.js";import{i as pe,e as O,g as me,k as ge,l as ve,j as xe,m as $,S as L,a as R,b as F,c as M,d as P}from"./select-DmacaaQt.js";import{P as A,I as N,F as ye,D as W,z as b,B as je,X as Se,h as be,c as we}from"./apis-BVPVRX3N.js";import{D as G,a as X,b as K,c as J}from"./dialog-BOUVdgMR.js";import{L as S}from"./label-BuhmYF4T.js";var D="Switch",[Ne]=O(D),[ke,Ce]=Ne(D),Q=d.forwardRef((t,l)=>{const{__scopeSwitch:i,name:c,checked:a,defaultChecked:o,required:g,disabled:p,value:h="on",onCheckedChange:y,form:j,...u}=t,[r,f]=d.useState(null),w=z(l,s=>f(s)),m=d.useRef(!1),n=r?j||!!r.closest("form"):!0,[v,k]=pe({prop:a,defaultProp:o??!1,onChange:y,caller:D});return e.jsxs(ke,{scope:i,checked:v,disabled:p,children:[e.jsx(A.button,{type:"button",role:"switch","aria-checked":v,"aria-required":g,"data-state":te(v),"data-disabled":p?"":void 0,disabled:p,value:h,...u,ref:w,onClick:me(t.onClick,s=>{k(x=>!x),n&&(m.current=s.isPropagationStopped(),m.current||s.stopPropagation())})}),n&&e.jsx(ee,{control:r,bubbles:!m.current,name:c,value:h,checked:v,required:g,disabled:p,form:j,style:{transform:"translateX(-100%)"}})]})});Q.displayName=D;var Y="SwitchThumb",Z=d.forwardRef((t,l)=>{const{__scopeSwitch:i,...c}=t,a=Ce(Y,i);return e.jsx(A.span,{"data-state":te(a.checked),"data-disabled":a.disabled?"":void 0,...c,ref:l})});Z.displayName=Y;var Ie="SwitchBubbleInput",ee=d.forwardRef(({__scopeSwitch:t,control:l,checked:i,bubbles:c=!0,...a},o)=>{const g=d.useRef(null),p=z(g,o),h=ge(i),y=ve(l);return d.useEffect(()=>{const j=g.current;if(!j)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(h!==i&&f){const w=new Event("click",{bubbles:c});f.call(j,i),j.dispatchEvent(w)}},[h,i,c]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...a,tabIndex:-1,ref:p,style:{...a.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ee.displayName=Ie;function te(t){return t?"checked":"unchecked"}var _e=Q,Ee=Z;const ae=d.forwardRef((t,l)=>{const{className:i,...c}=t;return e.jsx(_e,{className:_("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",i),...c,ref:l,children:e.jsx(Ee,{className:_("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ae.displayName="Switch";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],at=C("award",Ae);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],st=C("chart-column",Le);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],rt=C("house",Re);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nt=C("log-out",Fe);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],it=C("menu",Me);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ot=C("settings",Pe);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Te=C("upload",De);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dt=C("users",Ue);var T={exports:{}},U={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H;function $e(){if(H)return U;H=1;var t=fe();function l(u,r){return u===r&&(u!==0||1/u===1/r)||u!==u&&r!==r}var i=typeof Object.is=="function"?Object.is:l,c=t.useState,a=t.useEffect,o=t.useLayoutEffect,g=t.useDebugValue;function p(u,r){var f=r(),w=c({inst:{value:f,getSnapshot:r}}),m=w[0].inst,n=w[1];return o(function(){m.value=f,m.getSnapshot=r,h(m)&&n({inst:m})},[u,f,r]),a(function(){return h(m)&&n({inst:m}),u(function(){h(m)&&n({inst:m})})},[u]),g(f),f}function h(u){var r=u.getSnapshot;u=u.value;try{var f=r();return!i(u,f)}catch{return!0}}function y(u,r){return r()}var j=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:p;return U.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:j,U}var q;function Be(){return q||(q=1,T.exports=$e()),T.exports}var He=Be();function qe(){return He.useSyncExternalStore(Ve,()=>!0,()=>!1)}function Ve(){return()=>{}}var B="Avatar",[ze]=O(B),[Oe,se]=ze(B),re=d.forwardRef((t,l)=>{const{__scopeAvatar:i,...c}=t,[a,o]=d.useState("idle");return e.jsx(Oe,{scope:i,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:e.jsx(A.span,{...c,ref:l})})});re.displayName=B;var ne="AvatarImage",ie=d.forwardRef((t,l)=>{const{__scopeAvatar:i,src:c,onLoadingStatusChange:a=()=>{},...o}=t,g=se(ne,i),p=We(c,o),h=xe(y=>{a(y),g.onImageLoadingStatusChange(y)});return $(()=>{p!=="idle"&&h(p)},[p,h]),p==="loaded"?e.jsx(A.img,{...o,ref:l,src:c}):null});ie.displayName=ne;var oe="AvatarFallback",de=d.forwardRef((t,l)=>{const{__scopeAvatar:i,delayMs:c,...a}=t,o=se(oe,i),[g,p]=d.useState(c===void 0);return d.useEffect(()=>{if(c!==void 0){const h=window.setTimeout(()=>p(!0),c);return()=>window.clearTimeout(h)}},[c]),g&&o.imageLoadingStatus!=="loaded"?e.jsx(A.span,{...a,ref:l}):null});de.displayName=oe;function V(t,l){return t?l?(t.src!==l&&(t.src=l),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function We(t,{referrerPolicy:l,crossOrigin:i}){const c=qe(),a=d.useRef(null),o=c?(a.current||(a.current=new window.Image),a.current):null,[g,p]=d.useState(()=>V(o,t));return $(()=>{p(V(o,t))},[o,t]),$(()=>{const h=u=>()=>{p(u)};if(!o)return;const y=h("loaded"),j=h("error");return o.addEventListener("load",y),o.addEventListener("error",j),l&&(o.referrerPolicy=l),typeof i=="string"&&(o.crossOrigin=i),()=>{o.removeEventListener("load",y),o.removeEventListener("error",j)}},[o,i,l]),g}var le=re,ce=ie,ue=de;const Ge=d.forwardRef(({className:t,...l},i)=>e.jsx(le,{ref:i,className:_("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...l}));Ge.displayName=le.displayName;const Xe=d.forwardRef(({className:t,...l},i)=>e.jsx(ce,{ref:i,className:_("aspect-square h-full w-full",t),...l}));Xe.displayName=ce.displayName;const Ke=d.forwardRef(({className:t,...l},i)=>e.jsx(ue,{ref:i,className:_("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...l}));Ke.displayName=ue.displayName;const he=d.forwardRef(({className:t,...l},i)=>e.jsx("textarea",{className:_("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...l}));he.displayName="Textarea";const lt=({profile:t,open:l,onOpenChange:i,onSave:c})=>{const[a,o]=d.useState(null),[g,p]=d.useState({industry:[],region:[]}),[h,y]=d.useState(!1),[j,u]=d.useState(!0),[r,f]=d.useState(null);if(d.useEffect(()=>{t&&(o({...t}),typeof t.image=="string"&&t.image.trim()!==""?f(t.image):f(null))},[t]),d.useEffect(()=>()=>{r&&r.startsWith("blob:")&&URL.revokeObjectURL(r)},[r]),d.useEffect(()=>{(async()=>{try{const v=await W();v.status===200&&v.data.status===!0?p({industry:v.data.industry||[],region:v.data.region||[]}):b.error("Failed to load dropdown data.")}catch(v){console.error("Dropdown fetch error:",v),b.error("Unable to load dropdowns.")}finally{u(!1)}})()},[]),!a)return null;const w=n=>{const v=n.target.files?.[0];v&&(o(k=>({...k,image:v})),f(URL.createObjectURL(v)))},m=async()=>{y(!0);try{let n=a,v=!1;if(a.image instanceof File){const s=new FormData;Object.entries(a).forEach(([x,E])=>{s.append(x,E??"")}),n=s,v=!0}const k=await je(n,v);if(k.status===200)c(a),b.success(k.data.message||"Profile updated successfully",{duration:2e3}),i(!1),window.location.reload();else throw new Error("Failed to update profile")}catch(n){console.error("Error updating profile:",n),b.error("Failed to update profile. Please try again.")}finally{y(!1)}};return e.jsxs(G,{open:l,onOpenChange:i,children:[e.jsxs(X,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{children:e.jsx(J,{className:"text-2xl font-heading",children:"Edit Profile"})}),j?e.jsx("div",{className:"text-center py-6",children:"Loading dropdown data..."}):e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"name",children:"Full Name"}),e.jsx(N,{id:"name",value:a.name||"",onChange:n=>o({...a,name:n.target.value.trimStart()})})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"email",children:"Email Address"}),e.jsx(N,{id:"email",type:"email",value:a.email||"",onChange:n=>o({...a,email:n.target.value.trimStart()})})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"phone",children:"Phone Number"}),e.jsx(N,{id:"phone",value:a.phone||"",onChange:n=>o({...a,phone:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"industry",children:"Industry"}),e.jsxs(L,{value:a.businessId?a.businessId.toString():"",onValueChange:n=>o({...a,businessId:parseInt(n)}),children:[e.jsx(R,{className:"w-full",children:e.jsx(F,{placeholder:g.industry.find(n=>n.industryId===a.businessId)?.industryName||"-- Select Industry --"})}),e.jsx(M,{children:g.industry.map(n=>e.jsx(P,{value:n.industryId.toString(),children:n.industryName},n.industryId))})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"region",children:"State"}),e.jsxs(L,{value:a.stateId?a.stateId.toString():"",onValueChange:n=>o({...a,stateId:parseInt(n)}),children:[e.jsx(R,{className:"w-full",children:e.jsx(F,{placeholder:g.region.find(n=>n.regionId===a.stateId)?.regionName||"-- Select State --"})}),e.jsx(M,{children:g.region.map(n=>e.jsx(P,{value:n.regionId.toString(),children:n.regionName},n.regionId))})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"dob",children:"Date of Birth"}),e.jsx(N,{id:"dob",type:"date",value:a.dob||"",onChange:n=>o({...a,dob:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"bio",children:"Bio"}),e.jsx(he,{id:"bio",rows:4,value:a.bio||"",onChange:n=>o({...a,bio:n.target.value}),placeholder:"Tell us about yourself and your business in 250 words or less."})]}),e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx(S,{htmlFor:"image",children:"Profile Picture"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r||(typeof a.image=="string"?a.image:"https://cdn-icons-png.flaticon.com/512/847/847969.png"),alt:"Profile",className:"h-28 w-28 rounded-full object-cover border shadow-sm"}),r&&e.jsx("button",{type:"button",onClick:()=>{o({...a,image:null}),f(null)},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5 hover:bg-red-600",children:"âœ•"})]}),e.jsxs("div",{children:[e.jsx(N,{id:"image",type:"file",accept:"image/*",className:"hidden",onChange:w}),e.jsx(I,{type:"button",variant:"outline",onClick:()=>document.getElementById("image").click(),children:r?"Change Photo":"Upload Photo"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(I,{onClick:m,className:"bg-primary hover:bg-primary/90 text-primary-foreground",disabled:h,children:h?"Saving...":"Save Changes"}),e.jsx(I,{variant:"outline",onClick:()=>i(!1),disabled:h,children:"Cancel"})]})]})]}),e.jsx(ye,{})]})},ct=({ad:t,open:l,onOpenChange:i})=>{const c=d.useRef(null),[a,o]=d.useState([]),[g,p]=d.useState([]),[h,y]=d.useState(null),[j,u]=d.useState(!1),[r,f]=d.useState({title:"",link:"",state:"",industry:"",start_date:"",end_date:"",image:null,active:!0});d.useEffect(()=>{(async()=>{try{const x=await W();x.data.status&&(o(x.data.region||[]),p(x.data.industry||[]))}catch{console.log("Failed to load filters")}})()},[]),d.useEffect(()=>{t&&(f({title:t.title||"",link:t.link||"",state:t.region_id?String(t.region_id):"",industry:t.industry_id?String(t.industry_id):"",start_date:t.start_date||"",end_date:t.end_date||"",image:null,active:Number(t.active)===1}),y(null),u(!1))},[t]);const w=()=>{if(!r.title.trim()){b.error("Title is required");return}const s=new FormData;s.append("title",r.title),s.append("link",r.link),s.append("region_id",r.state),s.append("industry_id",r.industry),s.append("start_date",r.start_date),s.append("end_date",r.end_date),s.append("active",r.active?1:0),r.image instanceof File&&s.append("image",r.image),j&&s.append("remove_image",1),we(t.id,s).then(x=>{x.data.status?(b.success("Ad updated successfully!"),window.location.reload()):b.error("Failed to update ad"),i(!1)}).catch(()=>b.error("Error updating ad"))},m=(s,x)=>{f(E=>({...E,[s]:x}))},n=s=>{const x=s.target.files?.[0];if(x){if(x.size>5*1024*1024){b.error("File too large");return}f(E=>({...E,image:x})),y(URL.createObjectURL(x)),u(!0)}},v=()=>{y(null),f(s=>({...s,image:null})),u(!0),c.current&&(c.current.value="")},k=async s=>{f(x=>({...x,active:s}));try{(await be(t.id,{active:s?1:0})).data.status?b.success("Status updated"):b.error("Failed to update")}catch{b.error("Error updating status")}};return e.jsx(G,{open:l,onOpenChange:i,children:e.jsxs(X,{className:"sm:max-w-md",children:[e.jsx(K,{children:e.jsx(J,{children:"Edit Advertisement"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Ad Title"}),e.jsx(N,{value:r.title,onChange:s=>m("title",s.target.value),placeholder:"Enter ad title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Link URL"}),e.jsx(N,{value:r.link,onChange:s=>m("link",s.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"State"}),e.jsxs(L,{value:r.state||"",onValueChange:s=>m("state",s),children:[e.jsx(R,{children:e.jsx(F,{placeholder:"Select State"})}),e.jsx(M,{children:a.map(s=>e.jsx(P,{value:s.regionId.toString(),children:s.regionName},s.regionId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Industry"}),e.jsxs(L,{value:r.industry||"",onValueChange:s=>m("industry",s),children:[e.jsx(R,{children:e.jsx(F,{placeholder:"Select Industry"})}),e.jsx(M,{children:g.map(s=>e.jsx(P,{value:s.industryId.toString(),children:s.industryName},s.industryId))})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Start Date"}),e.jsx(N,{type:"date",value:r.start_date,onChange:s=>m("start_date",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"End Date"}),e.jsx(N,{type:"date",value:r.end_date,onChange:s=>m("end_date",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Ad Image"}),e.jsxs("div",{className:"space-y-3",children:[h||!j&&t?.image?e.jsxs("div",{className:"relative rounded-lg overflow-hidden border",children:[e.jsx("img",{src:h||`../${t.image}`,alt:"Ad preview",className:"w-full h-48 object-cover"}),e.jsx(I,{size:"icon",variant:"destructive",className:"absolute top-2 right-2",onClick:v,children:e.jsx(Se,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:border-primary",onClick:()=>c.current?.click(),children:[e.jsx(Te,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload image"})]}),e.jsx("input",{ref:c,type:"file",accept:"image/*",className:"hidden",onChange:n})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{checked:r.active,onCheckedChange:k}),e.jsx(S,{children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(I,{className:"flex-1",onClick:w,children:"Save Changes"}),e.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>i(!1),children:"Cancel"})]})]})]})})};export{at as A,st as C,lt as E,rt as H,nt as L,it as M,ot as S,he as T,dt as U,Ge as a,Ke as b,ct as c,Te as d,ae as e,Xe as f};
